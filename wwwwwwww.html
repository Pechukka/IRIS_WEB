<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRIS | Strategic Data Intelligence</title>
    <style>
        /* --- CORE STYLES --- */
        :root {
            --bg-color: #000000;
            --text-color: #ffffff;
            --accent-cyan: #00f3ff;
            --font-main: 'Inter', sans-serif;
            --font-code: 'Fira Code', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
            overflow-x: hidden; 
            overflow-y: auto;
            cursor: none; 
            width: 100vw;
        }

        /* --- UI UTILS --- */
        .hidden { opacity: 0; pointer-events: none; }
        #site-wrapper { transition: opacity 0.8s ease-out; }

        /* --- CUSTOM CURSOR --- */
        .cursor-dot {
            width: 4px; height: 4px; background-color: white;
            position: fixed; top: 0; left: 0; transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
            box-shadow: 0 0 15px var(--accent-cyan);
            transition: opacity 0.5s;
        }
        .cursor-outline { 
            width: 40px; height: 40px; 
            border: 1px solid rgba(255, 255, 255, 0.3); 
            position: fixed; top: 0; left: 0; transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
            transition: width 0.2s, height 0.2s, opacity 0.5s;
        }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; width: 100%; padding: 2rem 4rem;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 100; mix-blend-mode: exclusion;
        }
        .logo-text { font-weight: 700; font-size: 1.2rem; letter-spacing: 0.2em; }
        .nav-btn { 
            font-family: var(--font-code); border: 1px solid rgba(255,255,255,0.3); 
            padding: 8px 20px; text-decoration: none; color: white; font-size: 0.75rem;
            transition: 0.4s; overflow: hidden; position: relative;
        }
        .nav-btn:hover { background: white; color: black; }

        /* --- THE CENTRAL EYE --- */
        .eye-container-fixed {
            position: fixed; top: 50%; left: 50%;
            width: 280px; height: 180px; z-index: 50; pointer-events: none;
            filter: drop-shadow(0 0 25px rgba(255, 255, 255, 0.1));
            transform-origin: center center;
        }
        svg.iris-eye { width: 100%; height: 100%; overflow: visible; }
        .sclera { fill: none; stroke: white; stroke-width: 6; stroke-linecap: round; opacity: 0.5; }
        .pupil-ring { fill: none; stroke: white; stroke-width: 2; opacity: 0.8; }
        .pupil-core { fill: white; }

        /* --- SECTIONS --- */
        section {
            min-height: 100vh; width: 100%; position: relative; z-index: 60;
            display: flex; align-items: center; pointer-events: none;
        }
        .content-left { width: 40%; padding-left: 5vw; pointer-events: auto; }
        .content-right { width: 40%; margin-left: auto; padding-right: 5vw; text-align: right; pointer-events: auto; }

        .hero-title { font-size: 4vw; line-height: 0.95; margin-bottom: 2rem; mix-blend-mode: difference; font-weight: 700; letter-spacing: -0.02em; }
        .section-label { font-family: var(--font-code); color: var(--accent-cyan); font-size: 0.8rem; margin-bottom: 20px; display: block; letter-spacing: 0.1em; }
        .desc { color: #999; font-size: 1.25rem; line-height: 1.5; max-width: 480px; font-weight: 300; }
        .tech-tag { display: inline-block; border: 1px solid #444; padding: 6px 12px; margin: 5px 5px 5px 0; font-family: var(--font-code); font-size: 0.75rem; color: #ccc; text-transform: uppercase; }

        /* --- FORM SECTION --- */
        .form-container {
            width: 100%; max-width: 600px; margin: 0 auto; text-align: center;
            background: rgba(10, 10, 10, 0.8); padding: 3rem; border: 1px solid #222;
            backdrop-filter: blur(5px); position: relative; pointer-events: auto;
        }
        .form-input {
            width: 100%; background: transparent; border: none; border-bottom: 1px solid #333;
            color: white; padding: 15px 0; font-family: var(--font-code); font-size: 1rem;
            margin-bottom: 2rem; transition: 0.3s;
        }
        .form-input:focus { outline: none; border-bottom-color: var(--accent-cyan); }
        .form-input::placeholder { color: #555; }
        .submit-btn {
            background: transparent; border: 1px solid var(--accent-cyan); color: var(--accent-cyan);
            padding: 15px 50px; font-family: var(--font-code); font-size: 1rem; cursor: pointer;
            transition: 0.3s; letter-spacing: 0.1em;
        }
        .submit-btn:hover { background: var(--accent-cyan); color: black; box-shadow: 0 0 20px var(--accent-cyan); }

        /* --- FINAL MESSAGE (SPLIT SCREEN LAYOUT) --- */
        #final-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; 
            flex-direction: row; 
            justify-content: flex-end; /* Contenido a la derecha */
            align-items: center;
            z-index: 200; opacity: 0; pointer-events: none;
            background: transparent; 
            padding-right: 8vw; 
        }
        
        .final-content-wrapper {
            width: 45%; 
            display: flex; flex-direction: column; align-items: flex-start;
        }
        
        .final-logo { width: 120px; height: 80px; margin-bottom: 2rem; opacity: 0; transform: scale(0.8); }
        .final-logo .sclera { stroke: var(--accent-cyan); stroke-width: 4; }
        .final-logo .pupil-core { fill: white; }
        
        .final-text-container { text-align: left; text-transform: uppercase; }
        .final-line {
            display: block; font-size: 5vw; font-weight: 800; line-height: 1.1;
            letter-spacing: 0.05em; color: white;
            text-shadow: 0 0 30px rgba(0, 243, 255, 0.5);
            transform: translateY(20px); opacity: 0; 
        }
        .final-line.cyan { color: var(--accent-cyan); }

        /* --- 3D BACKGROUND --- */
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .reveal { opacity: 0; transform: translateY(30px); }
        
        footer {
            padding: 2rem; text-align: center; font-family: var(--font-code); font-size: 0.7rem; color: #444;
            position: relative; z-index: 60; background: black; width: 100%;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300&family=Inter:wght@300;400;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="cursor-dot"></div><div class="cursor-outline"></div><div id="canvas-container"></div>
    
    <div id="site-wrapper">
        <header><div class="logo-text">IRIS_OS</div><a href="#contact" class="nav-btn">INITIATE</a></header>

        <div class="eye-container-fixed" id="iris-eye">
            <svg class="iris-eye" viewBox="0 0 200 120">
                <g class="eyelids"><path class="sclera upper" d="M 10,60 Q 100,-20 190,60" /><path class="sclera lower" d="M 10,60 Q 100,140 190,60" /></g>
                <g class="pupil-group" id="pupil"><circle class="pupil-core" cx="100" cy="60" r="10" /><circle class="pupil-ring" cx="100" cy="60" r="20" style="opacity: 0.9" /><circle class="pupil-ring" cx="100" cy="60" r="30" style="opacity: 0.5; stroke-dasharray: 4 2;" /><circle class="pupil-ring" cx="100" cy="60" r="40" style="opacity: 0.3; stroke-dasharray: 1 4;" /></g>
            </svg>
        </div>

        <main>
            <section><div class="content-left reveal"><span class="section-label">SYSTEM ONLINE</span><h1 class="hero-title">INTELLIGENCE<br>BEYOND THE<br>DASHBOARD.</h1><p class="desc">The first Zero-Trust AI Analyst built for the C-Suite. Turn your database into an instant conversation.</p></div></section>
            <section><div class="content-right reveal"><span class="section-label">01 // VELOCITY</span><h1 class="hero-title">FROM WEEKS<br>TO SECONDS.</h1><p class="desc" style="margin-left: auto;">Stop waiting for analytics. Ask IRIS in plain English and get verified answers in 0.4s.<br><br><span style="color:white; font-size: 1rem;">"What is our ARR growth vs last Q?"</span></p></div></section>
            <section><div class="content-left reveal"><span class="section-label">02 // SOVEREIGNTY</span><h1 class="hero-title">AIR-TIGHT<br>SECURITY.</h1><p class="desc">We don't train on your data. IRIS reads, calculates, answers, and forgets.<br><br><strong>Zero-Log Architecture. EU Compliant.</strong></p></div></section>
            <section><div class="content-right reveal"><span class="section-label">03 // AGNOSTIC</span><h1 class="hero-title">PLUG &<br>GOVERN.</h1><p class="desc" style="margin-left: auto;">No migration required. Read-only tunnel to your stack.</p><div style="margin-top: 20px;"><span class="tech-tag">SNOWFLAKE</span><span class="tech-tag">POSTGRESQL</span><span class="tech-tag">SALESFORCE</span></div></div></section>

            <section id="contact" style="flex-direction: column;">
                <div class="reveal">
                    <span class="section-label" style="text-align: center;">04 // DEPLOYMENT</span>
                    <h1 class="hero-title" style="text-align: center; font-size: 3vw;">INITIATE PROTOCOL</h1>
                    <div class="form-container">
                        <form id="irisForm" onsubmit="handleFormSubmit(event)">
                            <input type="text" class="form-input" placeholder="OFFICER NAME" required>
                            <input type="email" class="form-input" placeholder="COMM CHANNEL (EMAIL)" required>
                            <input type="text" class="form-input" placeholder="OBJECTIVE / MESSAGE">
                            <button type="submit" class="submit-btn" id="submitBtn">TRANSMIT REQUEST</button>
                        </form>
                    </div>
                </div>
            </section>
            <footer>IRIS DATA SOLUTIONS S.L. © 2026 // SECURE CONNECTION ESTABLISHED</footer>
        </main>
    </div>

    <div id="final-screen">
        <div class="final-content-wrapper">
            <svg class="final-logo" viewBox="0 0 200 120">
                <path class="sclera upper" d="M 10,60 Q 100,-20 190,60" fill="none" />
                <path class="sclera lower" d="M 10,60 Q 100,140 190,60" fill="none" />
                <circle class="pupil-core" cx="100" cy="60" r="18" />
            </svg>
            <div class="final-text-container">
                <span class="final-line">WELCOME</span>
                <span class="final-line cyan">TO THE FAMILY</span>
            </div>
        </div>
    </div>

    <script>
        // --- UI & SCROLL ---
        const cursorDot=document.querySelector('.cursor-dot'),cursorOutline=document.querySelector('.cursor-outline'),pupil=document.getElementById('pupil'),eyelids=document.querySelector('.eyelids'),pupilRings=document.querySelectorAll('.pupil-ring');
        window.addEventListener('mousemove',(e)=>{cursorDot.style.left=`${e.clientX}px`;cursorDot.style.top=`${e.clientY}px`;cursorOutline.animate({left:`${e.clientX}px`,top:`${e.clientY}px`},{duration:500,fill:"forwards"});const x=(e.clientX-window.innerWidth/2)/(window.innerWidth/2),y=(e.clientY-window.innerHeight/2)/(window.innerHeight/2);gsap.to(pupil,{x:x*30,y:y*15,duration:.3,ease:"power2.out"});});
        gsap.set("#iris-eye",{xPercent:-50,yPercent:-50}); gsap.to("#iris-eye",{scale:1.03,duration:4,repeat:-1,yoyo:true,ease:"sine.inOut"});
        function blink(){const tl=gsap.timeline({onComplete:()=>{setTimeout(blink,Math.random()*4000+2000)}});tl.to(eyelids,{scaleY:.1,duration:.1,ease:"power4.inOut",transformOrigin:"center"}).to(eyelids,{scaleY:1,duration:.15,ease:"power4.inOut"});}setTimeout(blink,2000);
        pupilRings.forEach((ring,i)=>{gsap.to(ring,{attr:{r:parseFloat(ring.getAttribute('r'))+5},opacity:.1,duration:2,repeat:-1,yoyo:true,ease:"power1.inOut",delay:i*.2})});
        
        gsap.registerPlugin(ScrollTrigger); 
        document.querySelectorAll(".reveal").forEach((el)=>{
            gsap.to(el,{opacity:1,y:0,duration:1,ease:"power3.out",scrollTrigger:{trigger:el,start:"top 85%"}});
        });

        // --- THREE.JS SETUP ---
        const scene = new THREE.Scene(); scene.fog = new THREE.FogExp2(0x000000, 0.002);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 6000); camera.position.z = 5;
        const renderer = new THREE.WebGLRenderer({alpha:true, antialias:true}); renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true; 
        
        const maxAnisotropy = renderer.capabilities.getMaxAnisotropy();
        
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // ILUMINACIÓN (Aumentada y frontal)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); // Luz base más fuerte y blanca
        scene.add(ambientLight);
        // Luz frontal potente
        const sunLight = new THREE.DirectionalLight(0xffffff, 3.0); 
        sunLight.position.set(0, 50, 200); // Frontal-Arriba
        scene.add(sunLight);
        // Luz de relleno azulada suave
        const fillLight = new THREE.DirectionalLight(0x0044ff, 0.8); 
        fillLight.position.set(-100, -50, 100); 
        scene.add(fillLight);

        // --- 1. WARP LINES ---
        const starCount = 3000; const geo = new THREE.BufferGeometry(); const positions = new Float32Array(starCount * 6); const velocities = []; 
        for(let i=0; i<starCount; i++) {
            const x = (Math.random() - 0.5) * 400; const y = (Math.random() - 0.5) * 400; const z = (Math.random() - 0.5) * 1000 - 500; 
            positions[i*6] = x; positions[i*6+1] = y; positions[i*6+2] = z; positions[i*6+3] = x; positions[i*6+4] = y; positions[i*6+5] = z; velocities.push(Math.random());
        }
        geo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const warpMat = new THREE.LineBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0.8 });
        const warpLines = new THREE.LineSegments(geo, warpMat);
        scene.add(warpLines);

        // --- 2. SISTEMA DE PLANETAS ---
        function generateAlienTexture() {
            const size = 512; const canvas = document.createElement('canvas'); canvas.width = size; canvas.height = size; const ctx = canvas.getContext('2d');
            const baseHue = Math.random() * 360; const grdBase = ctx.createLinearGradient(0, 0, size, size);
            grdBase.addColorStop(0, `hsl(${baseHue}, 40%, 20%)`); grdBase.addColorStop(1, `hsl(${baseHue + 30}, 30%, 50%)`);
            ctx.fillStyle = grdBase; ctx.fillRect(0, 0, size, size);
            for (let i = 0; i < 40; i++) {
                const x = Math.random() * size; const y = Math.random() * size; const radius = Math.random() * size * 0.5 + 50;
                const lightness = Math.random() > 0.5 ? Math.random() * 20 + 10 : Math.random() * 60 + 40; const opacity = Math.random() * 0.15 + 0.05;
                const grd = ctx.createRadialGradient(x, y, 0, x, y, radius); grd.addColorStop(0, `hsla(${baseHue + Math.random()*40-20}, 40%, ${lightness}%, ${opacity})`); grd.addColorStop(1, 'transparent');
                ctx.fillStyle = grd; ctx.fillRect(0, 0, size, size);
            }
            return new THREE.CanvasTexture(canvas);
        }
        function generateRingTexture() {
            const size = 256; const canvas = document.createElement('canvas'); canvas.width = size; canvas.height = size; const ctx = canvas.getContext('2d');
            ctx.clearRect(0,0,size,size); const cx = size/2; const cy = size/2;
            for(let i=60; i<128; i+=1) { 
                if(Math.random() > 0.2) {
                    ctx.beginPath(); ctx.arc(cx, cy, i, 0, Math.PI*2);
                    const alpha = Math.random()*0.5 + 0.1;
                    ctx.strokeStyle = `rgba(200, 220, 255, ${alpha})`; ctx.lineWidth = 1; ctx.stroke();
                }
            }
            return new THREE.CanvasTexture(canvas);
        }
        function generateSunTexture() {
            const size = 512; const canvas = document.createElement('canvas'); canvas.width = size; canvas.height = size; const ctx = canvas.getContext('2d');
            const gradient = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
            gradient.addColorStop(0, '#ffdd00'); gradient.addColorStop(0.5, '#ff8800'); gradient.addColorStop(1, '#cc4400');
            ctx.fillStyle = gradient; ctx.fillRect(0, 0, size, size);
            for (let i = 0; i < 300; i++) {
                ctx.beginPath(); ctx.arc(Math.random() * size, Math.random() * size, Math.random() * 20 + 5, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(255, ${Math.floor(Math.random() * 200)}, 0, ${Math.random() * 0.5})`; ctx.fill();
            }
            return new THREE.CanvasTexture(canvas);
        }

        const activeBodies = []; let planetTimer = null; const MAX_BODIES = 5; 
        function addRings(planetMesh, planetRadius) {
            const ringGeo = new THREE.RingGeometry(planetRadius * 1.3, planetRadius * 2.2, 64);
            const ringTex = generateRingTexture();
            const pos = ringGeo.attributes.position; const v3 = new THREE.Vector3(); 
            for (let i = 0; i < pos.count; i++){ v3.fromBufferAttribute(pos, i); ringGeo.attributes.uv.setXY(i, (v3.x/200)+0.5, (v3.y/200)+0.5); }
            const ringMat = new THREE.MeshBasicMaterial({ map: ringTex, transparent: true, side: THREE.DoubleSide, opacity: 0.8, blending: THREE.AdditiveBlending });
            const ring = new THREE.Mesh(ringGeo, ringMat);
            ring.rotation.x = Math.PI * (0.2 + Math.random() * 0.3); ring.rotation.z = Math.random() * Math.PI * 2;
            planetMesh.add(ring); 
        }
        function spawnBody() {
            if (hasLaunched) return; 
            if (activeBodies.length >= MAX_BODIES) { planetTimer = setTimeout(spawnBody, 1000); return; }
            const isSun = Math.random() < 0.15; let bodyGeo, bodyMat, radius; let speed = Math.random() * 2 + 1; 
            if (isSun) {
                radius = Math.random() * 70 + 80; bodyGeo = new THREE.SphereGeometry(radius, 64, 64);
                const sunTexture = generateSunTexture();
                bodyMat = new THREE.MeshStandardMaterial({ map: sunTexture, emissive: 0xffaa00, emissiveMap: sunTexture, emissiveIntensity: 2, roughness: 1, metalness: 0 }); speed *= 1.5; 
            } else {
                radius = Math.random() * 35 + 5; const texture = generateAlienTexture();
                bodyGeo = new THREE.SphereGeometry(radius, 64, 64);
                bodyMat = new THREE.MeshStandardMaterial({ map: texture, roughness: 0.6, bumpMap: texture, bumpScale: Math.random()*0.3 + 0.05 });
            }
            const mesh = new THREE.Mesh(bodyGeo, bodyMat);
            if (!isSun && Math.random() < 0.4) { addRings(mesh, radius); }
            const side = Math.random() > 0.5 ? 1 : -1; const startX = side * (180 + Math.random() * 250); const startY = (Math.random() - 0.5) * 300; const startZ = - (Math.random() * 1200 + 1000); 
            mesh.position.set(startX, startY, startZ); mesh.userData.speed = speed; mesh.userData.radius = radius;
            scene.add(mesh); activeBodies.push(mesh);
            planetTimer = setTimeout(spawnBody, Math.random() * 3000 + 3000);
        }
        planetTimer = setTimeout(spawnBody, 2000); 
        function clearAllBodies() { activeBodies.forEach(body => { scene.remove(body); body.geometry.dispose(); body.material.dispose(); }); activeBodies.length = 0; if (planetTimer) clearTimeout(planetTimer); }

        // --- 3. PLANETA TIERRA FINAL (SPLIT SCREEN - BRIGHT) ---
        const textureLoader = new THREE.TextureLoader();
        function loadTexture(url) { const tex = textureLoader.load(url); tex.anisotropy = maxAnisotropy; return tex; }
        const earthMap = loadTexture('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_atmos_2048.jpg');
        const earthBump = loadTexture('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_normal_2048.jpg');
        const earthSpecular = loadTexture('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_specular_2048.jpg');
        const cloudMap = loadTexture('https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_clouds_2048.png');

        const earthGeo = new THREE.SphereGeometry(300, 64, 64); 
        const earthMat = new THREE.MeshPhongMaterial({ 
            map: earthMap, bumpMap: earthBump, bumpScale: 5, 
            specularMap: earthSpecular, specular: new THREE.Color(0x555555), shininess: 25 // Más brillo especular
        });
        const earthMesh = new THREE.Mesh(earthGeo, earthMat);
        
        earthMesh.position.set(0, 0, -3000); 
        earthMesh.rotation.y = Math.PI * 1.2; 
        earthMesh.material.opacity = 0; 
        earthMesh.material.transparent = true; 
        earthMesh.visible = false; 
        
        const cloudGeo = new THREE.SphereGeometry(302, 64, 64);
        const cloudMat = new THREE.MeshPhongMaterial({ map: cloudMap, transparent: true, opacity: 0, blending: THREE.AdditiveBlending, side: THREE.DoubleSide });
        const cloudMesh = new THREE.Mesh(cloudGeo, cloudMat);
        earthMesh.add(cloudMesh);
        scene.add(earthMesh); 

        // VARIABLES DE ESTADO
        let warpSpeed = { val: 0.05 }; let hasLaunched = false; let hasArrived = false;

        // --- LOOP PRINCIPAL ---
        function animate() {
            requestAnimationFrame(animate);

            if (!hasArrived) {
                // Warp
                const pos = warpLines.geometry.attributes.position.array;
                for(let i=0; i<starCount; i++) {
                    const idx = i*6; pos[idx+2] += warpSpeed.val * (1 + velocities[i]); const streakLength = warpSpeed.val * 8; 
                    pos[idx+5] = pos[idx+2] - streakLength; pos[idx+3] = pos[idx]; pos[idx+4] = pos[idx+1];
                    if(pos[idx+2] > 50) {
                        const newZ = -1000; const newX = (Math.random() - 0.5) * 400; const newY = (Math.random() - 0.5) * 400;
                        pos[idx] = newX; pos[idx+1] = newY; pos[idx+2] = newZ; pos[idx+3] = newX; pos[idx+4] = newY; pos[idx+5] = newZ;
                    }
                }
                warpLines.geometry.attributes.position.needsUpdate = true;
                // Planets
                for (let i = activeBodies.length - 1; i >= 0; i--) {
                    const body = activeBodies[i]; body.position.z += body.userData.speed; body.rotation.y += 0.005 / (body.userData.radius / 20);
                    if (body.position.z > 400) { scene.remove(body); body.geometry.dispose(); body.material.dispose(); activeBodies.splice(i, 1); }
                }
            }

            // Rotate Earth
            if (earthMesh.visible) {
                earthMesh.rotation.y += 0.0008; 
                cloudMesh.rotation.y += 0.0005;
            }
            renderer.render(scene, camera);
        }
        animate();

        // --- MANEJO DEL SUBMIT (SINCRONIZADO) ---
        function handleFormSubmit(e) {
            e.preventDefault();
            if(hasLaunched) return;
            hasLaunched = true;
            clearAllBodies(); 

            const btn = document.getElementById('submitBtn'); btn.innerHTML = "JUMP COORDINATES LOCKED"; btn.style.background = "white"; btn.style.color = "black";
            document.body.style.overflow = "hidden"; 
            
            gsap.to("#site-wrapper", { opacity: 0, duration: 1, pointerEvents: "none" });
            gsap.to(".cursor-dot, .cursor-outline", { opacity: 0, duration: 0.5 });

            const tl = gsap.timeline();
            tl.to(warpSpeed, { val: 80, duration: 3.5, ease: "expo.in" }); 
            tl.to({}, { duration: 1.5 }); 
            tl.to(warpSpeed, { 
                val: 0.001, duration: 2.5, ease: "power4.out",
                onStart: () => { gsap.to(warpMat, { opacity: 0, duration: 2 }); }
            });
            tl.add(() => {
                hasArrived = true; 
                
                // TIERRA: Se mueve y aparece
                gsap.to(earthMesh.position, { x: -500, z: -900, duration: 4, ease: "power2.out", onStart: () => { earthMesh.visible = true; } });
                gsap.to(earthMesh.material, { opacity: 1, duration: 3, ease: "power2.out" });
                gsap.to(cloudMat, { opacity: 0.9, duration: 3, ease: "power2.out", delay: 0.5 });

                // TEXTO: Aparece A LA VEZ (Sin retrasos internos)
                gsap.to("#final-screen", { opacity: 1, duration: 3 }); // Duración similar a la tierra para suavidad
                gsap.to(".final-logo", { opacity: 1, scale: 1, duration: 1.5, ease: "back.out(1.7)" }); // Sin delay
                gsap.to(".final-line", { y: 0, opacity: 1, stagger: 0.2, duration: 1.5, ease: "power3.out" }); // Sin delay inicial
            }, "-=1.5"); 
        }
        
        window.addEventListener('resize',()=>{camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);});
    </script>
</body>
</html>